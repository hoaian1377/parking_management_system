{% extends "base.html" %}
{% load static %}
{% block contents %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>Quản lý Bãi giữ xe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="{% static 'app/css/vehicle_management.css' %}" rel="stylesheet" />
</head>
<body class="bg-gray-100">
    <main class="pt-24 px-6 max-w-7xl mx-auto">
        <!-- Header -->
        <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">Hệ thống Quản lý Bãi giữ xe</h1>
        <h1>chỉ nhân viên quản lý bãi xe  được tùy chỉnh </h1>

        <!-- Sơ đồ bãi đậu -->
        <section class="bg-white p-6 rounded-xl shadow">

            <!-- Tầng 1 -->
            <div class="mb-6">
                <div class="flex justify-between items-center cursor-pointer" onclick="toggleFloor('floor-1')">
                    <h2 class="text-xl font-semibold text-blue-700">Tầng 1 (A-G)</h2>
                    <span id="icon-floor-1" class="text-2xl text-gray-500 transition-transform">&#x25BC;</span>
                </div>
                <div id="floor-1" class="transition-height max-h-0 overflow-hidden mt-4">
                    <div class="grid grid-cols-10 gap-4">
                        {% for spot in floor1_spots %}
                            <div class="border p-2 text-center rounded cursor-pointer text-xs font-medium transition-all duration-300 
                                {% if spot.tenvitri in occupied_slots %} bg-red-400 hover:bg-red-500 {% else %} bg-green-300 hover:bg-green-400 {% endif %}">
                                {{ spot.tenvitri }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Tầng 2 -->
            <div class="mb-6">
                <div class="flex justify-between items-center cursor-pointer" onclick="toggleFloor('floor-2')">
                    <h2 class="text-xl font-semibold text-blue-700">Tầng 2 (H-N)</h2>
                    <span id="icon-floor-2" class="text-2xl text-gray-500 transition-transform">&#x25BC;</span>
                </div>
                <div id="floor-2" class="transition-height max-h-0 overflow-hidden mt-4">
                    <div class="grid grid-cols-10 gap-4">
                        {% for spot in floor2_spots %}
                            <div class="border p-2 text-center rounded cursor-pointer text-xs font-medium transition-all duration-300 
                                {% if spot.tenvitri in occupied_slots %} bg-red-400 hover:bg-red-500 {% else %} bg-green-300 hover:bg-green-400 {% endif %}">
                                {{ spot.tenvitri }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Tầng 3 -->
            <div class="mb-6">
                <div class="flex justify-between items-center cursor-pointer" onclick="toggleFloor('floor-3')">
                    <h2 class="text-xl font-semibold text-blue-700">Tầng 3 (O-U)</h2>
                    <span id="icon-floor-3" class="text-2xl text-gray-500 transition-transform">&#x25BC;</span>
                </div>
                <div id="floor-3" class="transition-height max-h-0 overflow-hidden mt-4">
                    <div class="grid grid-cols-10 gap-4">
                        {% for spot in floor3_spots %}
                            <div class="border p-2 text-center rounded cursor-pointer text-xs font-medium transition-all duration-300 
                                {% if spot.tenvitri in occupied_slots %} bg-red-400 hover:bg-red-500 {% else %} bg-green-300 hover:bg-green-400 {% endif %}">
                                {{ spot.tenvitri }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Tầng 4 -->
            <div class="mb-6">
                <div class="flex justify-between items-center cursor-pointer" onclick="toggleFloor('floor-4')">
                    <h2 class="text-xl font-semibold text-blue-700">Tầng 4 (V-Z)</h2>
                    <span id="icon-floor-4" class="text-2xl text-gray-500 transition-transform">&#x25BC;</span>
                </div>
                <div id="floor-4" class="transition-height max-h-0 overflow-hidden mt-4">
                    <div class="grid grid-cols-10 gap-4">
                        {% for spot in floor4_spots %}
                            <div class="border p-2 text-center rounded cursor-pointer text-xs font-medium transition-all duration-300 
                                {% if spot.tenvitri in occupied_slots %} bg-red-400 hover:bg-red-500 {% else %} bg-green-300 hover:bg-green-400 {% endif %}">
                                {{ spot.tenvitri }}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

        </section>
    </main>

    <!-- Script toggle mở tầng -->
    <script>
      function toggleFloor(floorId) {
        const container = document.getElementById(floorId);
        const icon = document.getElementById('icon-' + floorId);

        if (container.classList.contains('max-h-0')) {
          container.classList.remove('max-h-0');
          container.classList.add('max-h-[3000px]');
          icon.classList.add('rotate-180');
        } else {
          container.classList.add('max-h-0');
          container.classList.remove('max-h-[3000px]');
          icon.classList.remove('rotate-180');
        }
      }
    </script>
</body>
</html>
{% endblock contents %}